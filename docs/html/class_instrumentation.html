<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Smoke: Instrumentation Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Instrumentation Class Reference</h1><!-- doxytag: class="Instrumentation" --><!-- doxytag: inherits="IService::IInstrumentation,Singleton" -->The <a class="el" href="class_instrumentation.html" title="The Instrumentation class collects and records performance stats about the various...">Instrumentation</a> class collects and records performance stats about the various parts of the system.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;Instrumentation.h&gt;</code>
<p>
<div class="dynheader">
Inheritance diagram for Instrumentation:</div>
<div class="dynsection">
<p><center><img src="class_instrumentation__inherit__graph.png" border="0" usemap="#_instrumentation__inherit__map" alt="Inheritance graph"></center>
<map name="_instrumentation__inherit__map">
<area shape="rect" href="class_i_service_1_1_i_instrumentation.html" title="Instrumentation interface, to let various pieces of code touch the instrumentation..." alt="" coords="5,5,171,32"><area shape="rect" href="class_singleton.html" title="Base case for all singleton classes." alt="" coords="195,5,269,32"></map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center></div>
<div class="dynheader">
Collaboration diagram for Instrumentation:</div>
<div class="dynsection">
<p><center><img src="class_instrumentation__coll__graph.png" border="0" usemap="#_instrumentation__coll__map" alt="Collaboration graph"></center>
<map name="_instrumentation__coll__map">
<area shape="rect" href="class_i_service_1_1_i_instrumentation.html" title="Instrumentation interface, to let various pieces of code touch the instrumentation..." alt="" coords="5,5,171,32"><area shape="rect" href="class_singleton.html" title="Base case for all singleton classes." alt="" coords="195,5,269,32"></map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center></div>

<p>
<a href="class_instrumentation-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_instrumentation.html#aec3945c4436b6b57b7c1576f64f5e49">Instrumentation</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_instrumentation.html#6ce9be4cfbaa871ca5bcd526c9f1233f">~Instrumentation</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_instrumentation.html#3620f21828228985ce969b6ba4ce6960">UpdatePeriodicData</a> (f32 deltaTime)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">i32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_instrumentation.html#67d1a5ab251ea07d16942cb5740bc193">getCPUCount</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">f32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_instrumentation.html#446e9a691794d4f73c05d81c6062b002">getCurrentFPS</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">i32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_instrumentation.html#f667bcc0ad27c9de449f32ee35b278b7">getNumCounters</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_instrumentation.html#08bb04c58796b8592191fc6df05dbdbd">getCPUCounters</a> (f64 *CPUPercent)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_instrumentation.html#e7ad77c024e6cfbba0ec639d95b57809">setActiveThreadCount</a> (i32 activeThreadCount)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">i32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_instrumentation.html#56d20af4ee4905ef27b2213dcf10bee9">getActiveThreadCount</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_instrumentation.html#cea1a2d805ddd8a6e6f5ae80a4988ee3">CaptureJobCounterTicks</a> (u32 jobType, i64 jobCounterTicks)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">i32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_instrumentation.html#7c023d5372f185559399ab57ae460d2e">getJobCount</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_instrumentation.html#459a5c1d8f91bfff739ad12f7653f6cd">getJobRatios</a> (f32 *jobRatios)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
The <a class="el" href="class_instrumentation.html" title="The Instrumentation class collects and records performance stats about the various...">Instrumentation</a> class collects and records performance stats about the various parts of the system. 
<p>
It is hooked in to the framework and is updated from within the scheduler. It caches performance stats until they are needed for display.<p>
This class implements the service <a class="el" href="class_instrumentation.html" title="The Instrumentation class collects and records performance stats about the various...">Instrumentation</a> interface, and is a <a class="el" href="class_singleton.html" title="Base case for all singleton classes.">Singleton</a>.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="class_i_service.html#ac697a843ca8dfcdb7005b8ac6fc827b" title="Get the instrumentation interface.">IService::Instrumentation</a><p>
</dd></dl>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="aec3945c4436b6b57b7c1576f64f5e49"></a><!-- doxytag: member="Instrumentation::Instrumentation" ref="aec3945c4436b6b57b7c1576f64f5e49" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Instrumentation::Instrumentation           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Basic constructor. 
</div>
</div><p>
<a class="anchor" name="6ce9be4cfbaa871ca5bcd526c9f1233f"></a><!-- doxytag: member="Instrumentation::~Instrumentation" ref="6ce9be4cfbaa871ca5bcd526c9f1233f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Instrumentation::~Instrumentation           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Basic destructor. 
</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="3620f21828228985ce969b6ba4ce6960"></a><!-- doxytag: member="Instrumentation::UpdatePeriodicData" ref="3620f21828228985ce969b6ba4ce6960" args="(f32 deltaTime)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Instrumentation::UpdatePeriodicData           </td>
          <td>(</td>
          <td class="paramtype">f32&nbsp;</td>
          <td class="paramname"> <em>deltaTime</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function drives the instrumentation; it's called regularly from the scheduler in the framework, to let the instrumentation know that another frame has elapsed. Whenever it is called, this function will make sure that the cached stats used by the instrumentation are up to date; if they've gotten too old, it will refresh those stats.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>deltaTime</em>&nbsp;</td><td>f32 - Elapsed wall-clock time since the last call to this function.</td></tr>
  </table>
</dl>

<p>Implements <a class="el" href="class_i_service_1_1_i_instrumentation.html#0421aeebcf5d4b95fe6a0e2c6ed0ec56">IService::IInstrumentation</a>.</p>

</div>
</div><p>
<a class="anchor" name="67d1a5ab251ea07d16942cb5740bc193"></a><!-- doxytag: member="Instrumentation::getCPUCount" ref="67d1a5ab251ea07d16942cb5740bc193" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">i32 Instrumentation::getCPUCount           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the number of available CPUs in the system, including physical and logical CPUs.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>i32 - Number of available CPUs in the system.</dd></dl>

<p>Implements <a class="el" href="class_i_service_1_1_i_instrumentation.html#dc58c4a40db4c09da236c720bc27b342">IService::IInstrumentation</a>.</p>

</div>
</div><p>
<a class="anchor" name="446e9a691794d4f73c05d81c6062b002"></a><!-- doxytag: member="Instrumentation::getCurrentFPS" ref="446e9a691794d4f73c05d81c6062b002" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">f32 Instrumentation::getCurrentFPS           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the most recently-measured frame rate (in Frames Per Second). This value is automatically refreshed. It is averaged over the last few frames (defined by the update interval in this class).<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>f32 - Frame rate, in frames per second.</dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd>Instrumentation::m_secondsPerUpdate<p>
</dd></dl>

<p>Implements <a class="el" href="class_i_service_1_1_i_instrumentation.html#854d9923c47e204a385cb8c6275dcc78">IService::IInstrumentation</a>.</p>

</div>
</div><p>
<a class="anchor" name="f667bcc0ad27c9de449f32ee35b278b7"></a><!-- doxytag: member="Instrumentation::getNumCounters" ref="f667bcc0ad27c9de449f32ee35b278b7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">i32 Instrumentation::getNumCounters           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the number of CPU performance counters that we're using. There will be one for each available CPU, and one more for the total.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>i32 - Number of CPU performance counters, which will be returned by the getCPUCounters call.</dd></dl>

<p>Implements <a class="el" href="class_i_service_1_1_i_instrumentation.html#bcf120c57a08f528c148af8d4f98840f">IService::IInstrumentation</a>.</p>

</div>
</div><p>
<a class="anchor" name="08bb04c58796b8592191fc6df05dbdbd"></a><!-- doxytag: member="Instrumentation::getCPUCounters" ref="08bb04c58796b8592191fc6df05dbdbd" args="(f64 *CPUPercent)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Instrumentation::getCPUCounters           </td>
          <td>(</td>
          <td class="paramtype">f64 *&nbsp;</td>
          <td class="paramname"> <em>CPUPercent</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the most recently measured CPU counters. This value is automatically refreshed.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>CPUPercent</em>&nbsp;</td><td>f64* - Array, filled by this call, of CPU counters showing percent CPU load. Must be big enough to hold all counters, see <a class="el" href="class_instrumentation.html#f667bcc0ad27c9de449f32ee35b278b7">Instrumentation::getNumCounters()</a>. </td></tr>
  </table>
</dl>

<p>Implements <a class="el" href="class_i_service_1_1_i_instrumentation.html#d64943c8d4d73de36ee99c071a62d156">IService::IInstrumentation</a>.</p>

</div>
</div><p>
<a class="anchor" name="e7ad77c024e6cfbba0ec639d95b57809"></a><!-- doxytag: member="Instrumentation::setActiveThreadCount" ref="e7ad77c024e6cfbba0ec639d95b57809" args="(i32 activeThreadCount)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Instrumentation::setActiveThreadCount           </td>
          <td>(</td>
          <td class="paramtype">i32&nbsp;</td>
          <td class="paramname"> <em>activeThreadCount</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the number of threads the application will now run.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>activeThreadCount</em>&nbsp;</td><td>i32 - Number of active threads the app should use now.</td></tr>
  </table>
</dl>

<p>Implements <a class="el" href="class_i_service_1_1_i_instrumentation.html#46a321b3be82e079d054b1e73ef1f5ff">IService::IInstrumentation</a>.</p>

</div>
</div><p>
<a class="anchor" name="56d20af4ee4905ef27b2213dcf10bee9"></a><!-- doxytag: member="Instrumentation::getActiveThreadCount" ref="56d20af4ee4905ef27b2213dcf10bee9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">i32 Instrumentation::getActiveThreadCount           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the number of threads that we're currently using in this application.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>i32 - Current active thread count.</dd></dl>

<p>Implements <a class="el" href="class_i_service_1_1_i_instrumentation.html#0b43b5cb22e5deba4621a734f649bb2c">IService::IInstrumentation</a>.</p>

</div>
</div><p>
<a class="anchor" name="cea1a2d805ddd8a6e6f5ae80a4988ee3"></a><!-- doxytag: member="Instrumentation::CaptureJobCounterTicks" ref="cea1a2d805ddd8a6e6f5ae80a4988ee3" args="(u32 jobType, i64 jobCounterTicks)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Instrumentation::CaptureJobCounterTicks           </td>
          <td>(</td>
          <td class="paramtype">u32&nbsp;</td>
          <td class="paramname"> <em>jobType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">i64&nbsp;</td>
          <td class="paramname"> <em>jobCounterTicks</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called when some job has finished. Keep track of how much time this job has spent in this frame. There may be many jobs of one type passed in during a single frame; their results will be appended.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>jobType</em>&nbsp;</td><td>u32 - The type of the job that has just completed; a member of System::Types.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>jobCounterTicks</em>&nbsp;</td><td>i64 - The number of clock ticks, from _RDTSC, that this job used during this frame.</td></tr>
  </table>
</dl>

<p>Implements <a class="el" href="class_i_service_1_1_i_instrumentation.html#67440177a60b0d1ca1f7380f5a9afcca">IService::IInstrumentation</a>.</p>

</div>
</div><p>
<a class="anchor" name="7c023d5372f185559399ab57ae460d2e"></a><!-- doxytag: member="Instrumentation::getJobCount" ref="7c023d5372f185559399ab57ae460d2e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">i32 Instrumentation::getJobCount           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the max number of job types possible in the system, so the caller can allocate the right sized array.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>i32 - Max number of job types.</dd></dl>

<p>Implements <a class="el" href="class_i_service_1_1_i_instrumentation.html#aa66a5a3d57d0c78af91bc247e7666c6">IService::IInstrumentation</a>.</p>

</div>
</div><p>
<a class="anchor" name="459a5c1d8f91bfff739ad12f7653f6cd"></a><!-- doxytag: member="Instrumentation::getJobRatios" ref="459a5c1d8f91bfff739ad12f7653f6cd" args="(f32 *jobRatios)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Instrumentation::getJobRatios           </td>
          <td>(</td>
          <td class="paramtype">f32 *&nbsp;</td>
          <td class="paramname"> <em>jobRatios</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the ratios of job work done in this most recent frame.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>jobRatios</em>&nbsp;</td><td>f32* - Array that this function should fill with the ratios of time spent in each workload on this frame. Must be the right length; call getJobCount. </td></tr>
  </table>
</dl>

<p>Implements <a class="el" href="class_i_service_1_1_i_instrumentation.html#9ccc73263f169dbd586ae5d52909a01b">IService::IInstrumentation</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>C:/Projects/Smoke/code/src/Framework/Instrumentation.h<li>C:/Projects/Smoke/code/src/Framework/Instrumentation.cpp</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Oct 28 13:16:04 2008 for Smoke by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
